<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>step1</title>
    <script src="../../../module/assets/js/vendor/jquery.min.js"></script>
    <script src="../../../module/assets/js/vendor/tether.min.js"
            integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
            crossorigin="anonymous"></script>

    <link href="../../../module/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="../../../module/dist/js/bootstrap.js"></script>
    <!--<script src="../../../module/assets/js/vendor/jquery.min.js"></script>-->
    <script src="./echarts/echarts.min.js"></script>
    <script src="./echarts/echarts-wordcloud.min.js"></script>


</head>
<body>
<div>
    <div style="padding: 0rem 1.25rem">
        <span>实体并列关系相似度适用于考察任意给定的两个实体在多大程度上属于同一概念分类的指标测度，相似度越高，
            表明这2个实体越有可能属于同一语义类别
            </span>
        <div>
            <div id="echarts" style="height: 450px;width: 100%"></div>
        </div>
    </div>
</div>
</body>
<script>
    var myChart = echarts.init(document.getElementById('echarts'));

    myChart.title = '衡量本体相似度的热力图';

    // var threshold=1;

    var hours =
        ['正源有限公司', '国税局', '偷税', '工商所得税', '个人所得税',
            '房产税', '契税', '土地使用税', '财产税税', '土地增值税',
            '车船税', '印花税', '城建税', '浙江省', '原油税',
            '天然气税', '虚开', '其他非金属矿', '随机森林', '有色金属矿',
            '张甜甜', '杭州市', '和丰有限公司', '比例税'];

    var days = ['地区', '遗产税', '公司',
        '检测手段', '税务单位', '税种', '偷漏税手段'];

    var data = [
        [0, 0, 5], [0, 1, 1], [0, 2, 0], [0, 3, 0], [0, 4, 0],
        [0, 5, 0], [0, 6, 0], [0, 7, 0], [0, 8, 0], [0, 9, 0],
        [0, 10, 0], [0, 11, 2], [0, 12, 2], [0, 13, 8], [0, 14, 1],
        [0, 15, 3], [0, 16, 4], [0, 17, 3], [0, 18, 4], [0, 19, 4],
        [0, 20, 3], [0, 21, 7], [0, 22, 2], [0, 23, 5],

        [1, 0, 1], [1, 1, 0], [1, 2, 3], [1, 3, 5], [1, 4, 6],
        [1, 5, 8], [1, 6, 9], [1, 7, 2], [1, 8, 9], [1, 9, 6],
        [1, 10, 5], [1, 11, 6], [1, 12, 7], [1, 13, 1], [1, 14, 7],
        [1, 15, 7], [1, 16, 0], [1, 17, 2], [1, 18, 0], [1, 19, 0],
        [1, 20, 0], [1, 21, 0], [1, 22, 0], [1, 23, 2],

        [2, 0, 9], [2, 1, 1], [2, 2, 0], [2, 3, 0], [2, 4, 0],
        [2, 5, 0], [2, 6, 0], [2, 7, 0], [2, 8, 0], [2, 9, 0],
        [2, 10, 3], [2, 11, 2], [2, 12, 1], [2, 13, 2], [2, 14, 0],
        [2, 15, 1], [2, 16, 1], [2, 17, 1], [2, 18, 1], [2, 19, 1],
        [2, 20, 1], [2, 21, 0], [2, 22, 8], [2, 23, 0],

        [3, 0, 1], [3, 1, 0], [3, 2, 0], [3, 3, 0], [3, 4, 0],
        [3, 5, 0], [3, 6, 0], [3, 7, 0], [3, 8, 0], [3, 9, 0],
        [3, 10, 0], [3, 11, 0], [3, 12, 0], [3, 13, 1], [3, 14, 0],
        [3, 15, 0], [3, 16, 0], [3, 17, 0], [3, 18, 10], [3, 19, 1],
        [3, 20, 0], [3, 21, 0], [3, 22, 0], [3, 23, 1],

        [4, 0, 1], [4, 1, 10], [4, 2, 0], [4, 3, 0], [4, 4, 0],
        [4, 5, 1], [4, 6, 0], [4, 7, 0], [4, 8, 0], [4, 9, 2],
        [4, 10, 1], [4, 11, 1], [4, 12, 2], [4, 13, 1], [4, 14, 0],
        [4, 15, 1], [4, 16, 2], [4, 17, 1], [4, 18, 1], [4, 19, 0],
        [4, 20, 1], [4, 21, 0], [4, 22, 0], [4, 23, 0],

        [5, 0, 2], [5, 1, 1], [5, 2, 0], [5, 3, 8], [5, 4, 9],
        [5, 5, 7], [5, 6, 8], [5, 7, 6], [5, 8, 8], [5, 9, 7],
        [5, 10, 6], [5, 11, 8], [5, 12, 7], [5, 13, 0], [5, 14, 9],
        [5, 15, 8], [5, 16, 0], [5, 17, 0], [5, 18, 0], [5, 19, 0],
        [5, 20, 3], [5, 21, 0], [5, 22, 2], [5, 23, 0],

        [6, 0, 1], [6, 1, 0], [6, 2, 0], [6, 3, 0], [6, 4, 0],
        [6, 5, 0], [6, 6, 0], [6, 7, 0], [6, 8, 0], [6, 9, 0],
        [6, 10, 1], [6, 11, 1], [6, 12, 1], [6, 13, 1], [6, 14, 1],
        [6, 15, 1], [6, 16, 10], [6, 17, 0], [6, 18, 0], [6, 19, 0],
        [6, 20, 1], [6, 21, 2], [6, 22, 2], [6, 23, 1]];

    function change(data, threshold) {
        return data.map(function (item) {
            return [item[1], item[0], item[2] >= threshold ? item[2] : 0 || '-'];
        });
    }

    xuanran(change(data, 1));

    function xuanran(data1) {
        option = {
            tooltip: {
                position: 'top'
            },
            animation: false,
            grid: {
                height: '50%',
                y: '10%'
            },
            xAxis: {
                type: 'category',
                data: hours,
                splitArea: {
                    show: true
                }
            },
            yAxis: {
                type: 'category',
                data: days,
                splitArea: {
                    show: true
                }
            },
            visualMap: {
                min: 0,
                max: 10,
                calculable: true,
                orient: 'horizontal',
                left: 'center',
                bottom: '15%'
            },
            toolbox: {
                right:'30',
                feature: {
                    myTool1: {
                        show: true,
                        type:"circle",
                        title: '筛选',
                        icon: 'image://http://echarts.baidu.com/images/favicon.png',
                        onclick: function () {
                            data1 = change(data,6)
                            myChart.clear();
                            xuanran(data1)
                        }
                    },
                    myTool2: {
                        show: true,
                        title: '恢复',
                        icon: 'image://http://echarts.baidu.com/images/favicon.png',
                        onclick: function () {
                            data1 = change(data,1)
                            myChart.clear();
                            xuanran(data1)
                        }
                    }
                }
            },
            series: [{
                name: '相似度',
                type: 'heatmap',
                data: data1,
                label: {
                    fontsize: 10,
                    normal: {
                        show: true
                    }
                },
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }]
        };
        myChart.setOption(option);
    }

    // function changedata(data) {
    //     alert("run here")
    //     threshold = 5;
    //     data = change(data,threshold);
    //     myChart.setOption(option)
    // }


</script>
</html>